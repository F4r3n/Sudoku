var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t){return null==t?"":t}function i(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e,n){t.classList[n?"add":"remove"](e)}let $;function v(t){$=t}const b=[],S=[],I=[],k=[],G=Promise.resolve();let E=!1;function U(t){I.push(t)}let y=!1;const x=new Set;function C(){if(!y){y=!0;do{for(let t=0;t<b.length;t+=1){const e=b[t];v(e),O(e.$$)}for(v(null),b.length=0;S.length;)S.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];x.has(e)||(x.add(e),e())}I.length=0}while(b.length);for(;k.length;)k.pop()();E=!1,y=!1,x.clear()}}function O(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const D=new Set;function K(t,e){t&&t.i&&(D.delete(t),t.i(e))}function Z(t,n,r,l){const{fragment:i,on_mount:c,on_destroy:u,after_update:a}=t.$$;i&&i.m(n,r),l||U((()=>{const n=c.map(e).filter(s);u?u.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(U)}function w(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(b.push(t),E||(E=!0,G.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(e,s,r,l,i,c,a,d=[-1]){const f=$;v(e);const h=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:s.target||f.$$.root};a&&a(h.root);let p=!1;if(h.ctx=r?r(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return h.ctx&&i(h.ctx[t],h.ctx[t]=s)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](s),p&&P(e,t)),n})):[],h.update(),p=!0,o(h.before_update),h.fragment=!!l&&l(h.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();s.intro&&K(e.$$.fragment),Z(e,s.target,s.anchor,s.customElement),C()}v(f)}class A{$destroy(){w(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function M(t,e,n){const o=t.slice();return o[14]=e[n],o}function H(t,e,n){const o=t.slice();return o[17]=e[n],o[14]=n,o}function N(t){let e,n,s,r,a,$,v,b=(0==t[17]?"":t[17])+"";return{c(){e=d("div"),n=f(b),s=h(),_(e,"class",r=l(t[1]==t[14]||parseInt(t[14]/3)%3==parseInt(t[1]/3)%3&&parseInt(t[14]/27)==parseInt(t[1]/27)||t[14]%9==t[1]%9||parseInt(t[14]/9,10)==parseInt(t[1]/9,10)?"cell cell_hover":"cell")+" svelte-1oshksa"),_(e,"pos",a=t[14]),m(e,"cell_selected",t[2]==t[14])},m(o,r){c(o,e,r),i(e,n),i(e,s),t[10](e),$||(v=[p(e,"click",t[4]),p(e,"mouseover",t[5])],$=!0)},p(t,o){8&o&&b!==(b=(0==t[17]?"":t[17])+"")&&g(n,b),2&o&&r!==(r=l(t[1]==t[14]||parseInt(t[14]/3)%3==parseInt(t[1]/3)%3&&parseInt(t[14]/27)==parseInt(t[1]/27)||t[14]%9==t[1]%9||parseInt(t[14]/9,10)==parseInt(t[1]/9,10)?"cell cell_hover":"cell")+" svelte-1oshksa")&&_(e,"class",r),6&o&&m(e,"cell_selected",t[2]==t[14])},d(n){n&&u(e),t[10](null),$=!1,o(v)}}}function j(t){let e,n,o,s;function r(){return t[11](t[14])}return{c(){e=d("div"),n=f(t[14]),_(e,"class","number border svelte-1oshksa")},m(t,l){c(t,e,l),i(e,n),o||(s=p(e,"click",r),o=!0)},p(e,n){t=e},d(t){t&&u(e),o=!1,s()}}}function B(e){let n,s,r,l,m,$,v,b,S,I,k,G,E,U,y,x,C,O=e[3],D=[];for(let t=0;t<O.length;t+=1)D[t]=N(H(e,O,t));let K=[1,2,3,4,5,6,7,8,9],Z=[];for(let t=0;t<9;t+=1)Z[t]=j(M(e,K,t));return{c(){n=d("div"),s=d("button"),s.textContent="Generate",r=h(),l=d("button"),l.textContent="Solve",m=h(),$=d("div"),v=d("div");for(let t=0;t<D.length;t+=1)D[t].c();b=h(),S=d("div"),I=d("div");for(let t=0;t<9;t+=1)Z[t].c();k=h(),G=d("div"),G.textContent="Clear",E=h(),U=d("div"),y=f(e[0]),_(s,"class","button svelte-1oshksa"),_(l,"class","button svelte-1oshksa"),_(n,"class","mainMenu svelte-1oshksa"),_(v,"class","sudoku_board svelte-1oshksa"),_(I,"class","numpad svelte-1oshksa"),_(G,"class","number svelte-1oshksa"),_(U,"class","possibleValues svelte-1oshksa"),_(S,"class","pad svelte-1oshksa"),_($,"class","container svelte-1oshksa")},m(t,o){c(t,n,o),i(n,s),i(n,r),i(n,l),c(t,m,o),c(t,$,o),i($,v);for(let t=0;t<D.length;t+=1)D[t].m(v,null);i($,b),i($,S),i(S,I);for(let t=0;t<9;t+=1)Z[t].m(I,null);i(S,k),i(S,G),i(S,E),i(S,U),i(U,y),x||(C=[p(s,"click",e[6]),p(l,"click",e[7]),p(G,"click",e[12])],x=!0)},p(t,[e]){if(62&e){let n;for(O=t[3],n=0;n<O.length;n+=1){const o=H(t,O,n);D[n]?D[n].p(o,e):(D[n]=N(o),D[n].c(),D[n].m(v,null))}for(;n<D.length;n+=1)D[n].d(1);D.length=O.length}if(256&e){let n;for(K=[1,2,3,4,5,6,7,8,9],n=0;n<9;n+=1){const o=M(t,K,n);Z[n]?Z[n].p(o,e):(Z[n]=j(o),Z[n].c(),Z[n].m(I,null))}for(;n<9;n+=1)Z[n].d(1)}1&e&&g(y,t[0])},i:t,o:t,d(t){t&&u(n),t&&u(m),t&&u($),a(D,t),a(Z,t),x=!1,o(C)}}}function L(t,e,n){let{possibleValues:o=[]}=e,{currentElementHovered:s=-1}=e,{currentElementSelected:r=-1}=e,{data:l}=e;class i{constructor(){this._SUDOKU_SIZE=9,this._data=new Uint8Array(this._SUDOKU_SIZE*this._SUDOKU_SIZE),this._gridCoord=null}Init(){this._gridCoord=this._CreateCoordGrid();for(let t=0;t<this._data.length;t++)this._data[t]=0}GetGrid(){return this._data}GetPos(t,e){return e*this._SUDOKU_SIZE+t}GetCoord(t){return[t%this._SUDOKU_SIZE,parseInt(t/this._SUDOKU_SIZE)]}Iterate(t,e){}GetPossibleValues(t,e){const[n,o]=this.GetCoord(t);let s=[1,2,3,4,5,6,7,8,9];for(let r=n-3;r<n+3;r++)for(let n=o-3;n<o+3;n++){let o=this.GetPos(r,n);if(this.IsInBlock(t,o)){const t=e[o];0!==t&&(s[t-1]=0)}}for(let t=0;t<this._SUDOKU_SIZE;t++){const n=e[this.GetPos(t,o)];0!==n&&(s[n-1]=0)}for(let t=0;t<this._SUDOKU_SIZE;t++){const o=e[this.GetPos(n,t)];0!==o&&(s[o-1]=0)}return s.filter((t=>0!==t))}Reset(){for(let t=0;t<this._data.length;++t)this._data[t]=0}SetGrid(t){this._data=t}_CreateCoordGrid(){let t=new Uint8Array(this._SUDOKU_SIZE*this._SUDOKU_SIZE);for(let e=0;e<t.length;++e)t[e]=parseInt(e/3)%3+3*parseInt(e/27);return t}Solve(t,e){return new Promise(((e,n)=>{let o=t,s=[];s.push([t.slice(),0,0]);let r=!1;for(;s.length>0&&!r;){let[t,e,n]=s.pop(),l=0;for(l=e;l<t.length;++l){if(0!==t[l])continue;let e=this.GetPossibleValues(l,t);if(!(e.length>n))break;t[l]=e[n],e.length>1&&s.push([t.slice(),l,++n]),n=0}r=l===t.length,r&&(o=t)}e([r,o])}))}IsInBlock(t,e){return this._gridCoord[t]===this._gridCoord[e]}Generate(){function t(t,e){t=Math.ceil(t),e=Math.floor(e);return Math.floor(Math.random()*(e-t)+t)}console.log("Generate"),this.Reset();const e=(this._SUDOKU_SIZE*this._SUDOKU_SIZE-1)/8;for(let n=0;n<e;n++){const e=t(0,this._SUDOKU_SIZE*this._SUDOKU_SIZE);if(0!==this._data[e])continue;const n=this.GetPossibleValues(e,this._data);n.length>0&&(this._data[e]=n[t(0,n.length)])}}}function c(t){u.GetGrid()[r]=t,n(3,l=u.GetGrid())}let{sudoku:u=new i}=e;u.Init(),l=u.GetGrid();return t.$$set=t=>{"possibleValues"in t&&n(0,o=t.possibleValues),"currentElementHovered"in t&&n(1,s=t.currentElementHovered),"currentElementSelected"in t&&n(2,r=t.currentElementSelected),"data"in t&&n(3,l=t.data),"sudoku"in t&&n(9,u=t.sudoku)},[o,s,r,l,function(t){n(2,r=t.target.getAttribute("pos"))},function(t){n(1,s=t.target.getAttribute("pos")),n(0,o=u.GetPossibleValues(s,u.GetGrid()))},function(){u.Generate(),n(3,l=u.GetGrid())},async function(){u.Solve(u.GetGrid(),(t=>{console.log(t),n(3,l=t)})).then((([t,e])=>{t?(u.SetGrid(e),n(3,l=u.GetGrid())):console.log("No solution")}))},c,u,function(t){S[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},t=>{c(t)},()=>{c(0)}]}class R extends A{constructor(t){super(),V(this,t,L,B,r,{possibleValues:0,currentElementHovered:1,currentElementSelected:2,data:3,sudoku:9})}}function T(e){let n,o,s,r,l;return r=new R({}),{c(){var t;n=d("main"),o=d("h1"),o.textContent="Sudoku!",s=h(),(t=r.$$.fragment)&&t.c(),_(o,"class","svelte-1e6s4d4"),_(n,"class","svelte-1e6s4d4")},m(t,e){c(t,n,e),i(n,o),i(n,s),Z(r,n,null),l=!0},p:t,i(t){l||(K(r.$$.fragment,t),l=!0)},o(t){!function(t,e,n,o){if(t&&t.o){if(D.has(t))return;D.add(t),(void 0).c.push((()=>{D.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}(r.$$.fragment,t),l=!1},d(t){t&&u(n),w(r)}}}return new class extends A{constructor(t){super(),V(this,t,null,T,r,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
